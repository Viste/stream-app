{% extends 'layout.html' %}
{% block pageHeaderBlock%}
<div class="courseDetailHeaderBlock">
    <div class="previewImageBlockHeader">
        <img src="" width="130" height="130">
    </div>
    <div class="previewCourseNamingBlock"><h1>{{ course.name }}</h1></div>
    <div class="previewCourseStatusBlock">
        <p>{{ course.description }}</p>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="container">
    <!-- Программа курса -->
    <h2>Программа курса</h2>
    {% for program in programs %}
    <div><strong>{{ program.title }}</strong>: {{ program.description }}</div>
    {% endfor %}

    <!-- Трансляции и записи -->
    <h3>Записи Трансляций</h3>
    {% for broadcast in broadcasts %}
    <div class="mb-4">
        <!--<video id="player-{{ loop.index }}" class="cld-video-player" controls></video>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
            var player = cloudinary.videoPlayer('player-{{ loop.index }}', {
                cloudName: 'di2pcyu5n',
                autoplay: true,
                autoplayMode: 'on-scroll',
                fluid: true,
                controls: true,
                aiHighlightsGraph: true,
                floatingWhenNotVisible: 'right',
                hideContextMenu: false,
                showJumpControls: true,
                pictureInPictureToggle: true,
                showLogo: true,
                logoImageUrl: 'https://pprfnk.tech/favicon/favicon-32x32.jpg',
                logoOnclickUrl: 'https://pprfnk.tech/'
            });
            player.source('https://live.pprfnk.tech/vod/{{ broadcast.video_path }}?token={{ token | urlencode }}', {
                sourceTypes: ['mp4']
            });
            });
        </script>-->
        <video id="player-{{ loop.index }}" class="video-js" controls preload="auto" width="640" height="264" poster="MY_VIDEO_POSTER.jpg" data-setup="{}">
            <source src="https://live.pprfnk.tech/vod/{{ broadcast.video_path }}?token={{ token | urlencode }}" type="video/mp4" />
            <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that<a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
        </video>
    </div>
    {% endfor %}

    <!-- Домашние задания -->
    <h2>Домашние задания</h2>
    {% for homework in homeworks %}
    <div>
        <strong>{{ homework.title }}</strong>: {{ homework.description }}
        <form action="{{ url_for('views.submit_homework', homework_id=homework.id) }}" method="post" enctype="multipart/form-data">
            <input type="file" name="file" accept=".mp3, .wav">
            <button type="submit" class="btn btn-primary">Отправить</button>
        </form>
    </div>
    {% endfor %}
</div>
{% endblock %}
{% block ExtStylesBlock %}
<link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
{% endblock %}
{% block ExtScriptBlock %}
<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
{% endblock %}